<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.CoreCommerce.repository.BannerRepository">
	
	<select id="getAllBanners" resultType="com.CoreCommerce.domain.Banner">
	    SELECT 
	    	 id as id
	    	,title as title
	    	,subtitle as subtitle
	    	,description as description
	    	,image_url as imageUrl
	    	,link_url as linkUrl
	    	,sort_order as sortOrder
	    	,use_yn as useYn
	    FROM banner
	    ORDER BY sort_order ASC
	</select>
	
	<select id="getBannerById" parameterType="long"
        resultType="com.CoreCommerce.domain.Banner">
	    SELECT 
	    	id as id
	    	,title as title
	    	,subtitle as subtitle
	    	,description as description
	    	,image_url as imageUrl
	    	,link_url as linkUrl
	    	,sort_order as sortOrder
	    	,use_yn as useYn
	    FROM banner
	    WHERE id = #{id}
	</select>
	
	<select id="countAll" resultType="int">
	    SELECT COUNT(*)
	    FROM banner
	</select>
	
	<select id="findPaging"
	        parameterType="map"
	        resultType="com.CoreCommerce.domain.Banner">
	
	    SELECT  
	    	id as id
	    	,title as title
	    	,subtitle as subtitle
	    	,description as description
	    	,image_url as imageUrl
	    	,link_url as linkUrl
	    	,sort_order as sortOrder
	    	,use_yn as useYn
	    FROM banner
	    ORDER BY id DESC
	    LIMIT #{size} OFFSET #{offset}
	
	</select>
	
	<insert id="saveBanner" parameterType="com.CoreCommerce.domain.Banner"
        useGeneratedKeys="true" keyProperty="id">

	    INSERT INTO banner
	    (
	        title,
	        subtitle,
	        description,
	        image_url,
	        link_url,
	        sort_order,
	        use_yn
	    )
	    VALUES
	    (
	        #{title},
	        #{subtitle},
	        #{description},
	        #{imageUrl},
	        #{linkUrl},
	        #{sortOrder},
	        #{useYn}
	    )
	
	</insert>
	
	<update id="updateBanner" parameterType="com.CoreCommerce.domain.Banner">
	    UPDATE banner
	    SET
	        title = #{title},
	        subtitle = #{subtitle},
	        description = #{description},
	        image_url = #{imageUrl},
	        link_url = #{linkUrl},
	        sort_order = #{sortOrder},
	        use_yn = #{useYn}
	    WHERE id = #{id}
	</update>
	
	<delete id="deleteBanner" parameterType="long">
	    DELETE FROM banner
	    WHERE id = #{id}
	</delete>
	
</mapper>