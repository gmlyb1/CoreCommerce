<div th:fragment="header">

<!-- ================= TOP BAR ================= -->
<div class="bg-white border-bottom small">
    <div class="container d-flex justify-content-end py-2 gap-3">

        <a href="/inquiry/list" class="text-muted text-decoration-none">ê³ ê°ì„¼í„°</a>
        <a href="/notice/list" class="text-muted text-decoration-none">ê³µì§€ì‚¬í•­</a>

        <!-- ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ -->
        <div class="ms-3">

            <img th:if="${loginUser != null and loginUser.profileImage != null}"
                 th:src="@{${loginUser.profileImage}}"
                 width="28"
                 height="28"
                 class="rounded-circle border me-1"
                 style="object-fit: cover;">

            <span th:if="${loginUser != null}"
                  class="fw-bold text-dark me-2">
                <span th:text="${loginUser.name}"></span>
            </span>

            <div class="dropdown d-inline-block">

                <a class="text-dark text-decoration-none dropdown-toggle"
                   data-bs-toggle="dropdown">
                    âš™
                </a>

                <ul class="dropdown-menu dropdown-menu-end shadow-sm p-2">

                    <li th:if="${loginUser == null}">
                        <a class="dropdown-item" href="/login">
                            ë¡œê·¸ì¸
                        </a>
                    </li>

                    <li th:if="${loginUser == null}">
                        <a class="dropdown-item" href="/register">
                            íšŒì›ê°€ì…
                        </a>
                    </li>

                    <th:block th:if="${loginUser != null}">

                        <!-- ê´€ë¦¬ì ë©”ë‰´ -->
                        <li th:if="${loginUser.role == 'MANAGER'}">
                            <a class="dropdown-item" href="/admin/banner/list">
                                ğŸ· ë°°ë„ˆ ê´€ë¦¬
                            </a>
                        </li>

                        <li th:if="${loginUser.role == 'MANAGER'}">
                            <a class="dropdown-item" href="/admin/popup/list">
                                ğŸ“¢ íŒì—… ê´€ë¦¬
                            </a>
                        </li>

                        <li th:if="${loginUser.role == 'MANAGER'}">
                            <a class="dropdown-item" href="/admin/member/list">
                                ğŸ”‘ ê¶Œí•œ ê´€ë¦¬
                            </a>
                        </li>
                        
                        <li th:if="${loginUser.role == 'MANAGER' or loginUser.role == 'PRODUCTER'}">
						    <a class="dropdown-item" href="/admin/orders">
						        ğŸ“¦ ì£¼ë¬¸ ê´€ë¦¬
						    </a>
						</li>
						
						<li th:if="${loginUser.role == 'MANAGER'}">
						    <a class="dropdown-item" href="/admin/visitLog/list">
						        ğŸ•“ ì ‘ì†ê¸°ë¡ ê´€ë¦¬
						    </a>
						</li>

                        <li>
                            <a class="dropdown-item" href="/wishlist/list">
                                â¤ï¸ ì°œ ëª©ë¡
                            </a>
                        </li>

                        <li>
                            <a class="dropdown-item" href="/member/profile">
                                ğŸ‘¤ í”„ë¡œí•„
                            </a>
                        </li>

                        <li>
                            <a class="dropdown-item text-danger" href="/logout">
                                ğŸšª ë¡œê·¸ì•„ì›ƒ
                            </a>
                        </li>

                    </th:block>

                </ul>
            </div>

        </div>
    </div>
</div>


<!-- ================= LOGO + SEARCH + ICON ================= -->
<div class="bg-white shadow-sm">
    <div class="container py-4">

        <div class="row align-items-center">

            <!-- ë¡œê³  -->
            <div class="col-lg-3">
                <a href="/" class="text-decoration-none">
                    <h2 class="fw-bold text-primary m-0">
                        ğŸ› CoreCommerce
                    </h2>
                </a>
            </div>

            <!-- ê²€ìƒ‰ -->
            <div class="col-lg-6">
                <form action="/product/list" method="get">
                    <div class="input-group rounded-pill border overflow-hidden shadow-sm">

                        <input type="text"
                               name="keyword"
                               class="form-control border-0 px-4 py-2"
                               placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">

                        <button type="submit"
                                class="btn btn-primary px-4">
                            ğŸ”
                        </button>

                    </div>
                </form>
            </div>

            <!-- ì•„ì´ì½˜ -->
            <div class="col-lg-3 text-end">

                <a href="/wishlist/list"
                   class="btn btn-light border rounded-circle me-2"
                   style="width:45px;height:45px;">
                    â¤ï¸
                </a>

                <a href="/order/orders"
                   class="btn btn-light border rounded-circle me-2"
                   style="width:45px;height:45px;">
                    ğŸ“¦
                </a>

                <a href="/cart/list"
                   class="btn btn-primary rounded-circle"
                   style="width:45px;height:45px;">
                    ğŸ›’
                </a>

            </div>

        </div>
    </div>
</div>


<!-- ================= NAVBAR ================= -->
<div class="bg-white border-bottom">
    <div class="container">

        <nav class="navbar navbar-expand-lg navbar-light px-0">

            <button class="navbar-toggler"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarCollapse">

                <div class="navbar-nav w-100 text-center">

                    <a href="/"
                       th:classappend="${#httpServletRequest.requestURI == '/'} ? 'active-line'"
                       class="nav-link flex-fill py-3">
                        í™ˆ
                    </a>

                    <a href="/product/list"
                       th:classappend="${#httpServletRequest.requestURI.startsWith('/product')} ? 'active-line'"
                       class="nav-link flex-fill py-3">
                        ìƒí’ˆ
                    </a>

                    <a href="/notice"
                       th:classappend="${#httpServletRequest.requestURI.startsWith('/notice')} ? 'active-line'"
                       class="nav-link flex-fill py-3">
                        ê³µì§€ì‚¬í•­
                    </a>

                    <a href="/inquiry/list"
                       th:classappend="${#httpServletRequest.requestURI.startsWith('/inquiry')} ? 'active-line'"
                       class="nav-link flex-fill py-3">
                        1:1ë¬¸ì˜
                    </a>

                </div>

            </div>

        </nav>

    </div>
</div>


<!-- ================= NAV STYLE (ê³ ê¸‰ ë¼ì¸ ì• ë‹ˆë©”ì´ì…˜) ================= -->

<style>

/* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.navbar-nav .nav-link {
    position: relative;
    transition: color 0.3s ease;
    color: #333 !important;
    font-weight: 500;
}

/* ğŸ”¥ hover ê¸€ì ìƒ‰ë§Œ ë³€ê²½ */
.navbar-nav .nav-link:hover {
    color: #0d6efd !important;
}

/* ğŸ”µ ë°‘ì¤„ ì• ë‹ˆë©”ì´ì…˜ */
.navbar-nav .nav-link::after {
    content: "";
    position: absolute;
    left: 50%;
    bottom: 0;
    width: 0;
    height: 3px;
    background: #0d6efd;
    transition: all 0.3s ease;
    transform: translateX(-50%);
    border-radius: 10px;
}

/* hover í•˜ë©´ ë¼ì¸ í™•ì¥ */
.navbar-nav .nav-link:hover::after {
    width: 60%;
}

/* í˜„ì¬ í™œì„± ë©”ë‰´ */
.active-line {
    color: #0d6efd !important;
}

.active-line::after {
    width: 60%;
}

</style>