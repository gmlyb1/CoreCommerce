<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="layout/head :: head">

    <title>ì£¼ë¬¸ ë‚´ì—­</title>

    <style>

        body {
            background: #f5f6f8;
        }

        .order-wrapper {
            max-width: 1100px;
            margin: auto;
        }

        /* ì£¼ë¬¸ ì¹´ë“œ */
        .order-card {
            border: none;
            border-radius: 18px;
            background: #fff;
            box-shadow: 0 6px 18px rgba(0,0,0,0.04);
            transition: 0.2s ease;
        }

        .order-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        }

        /* ìƒíƒœ ë±ƒì§€ */
        .status-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        .status-READY {
            background: #ffc107;
            color: #000;
        }

        .status-PAID {
            background: #0d6efd;
            color: #fff;
        }

        .status-SHIPPED {
            background: #198754;
            color: #fff;
        }

        .status-CANCELLED {
            background: #dc3545;
            color: #fff;
        }

        /* ìƒì„¸ ë§í¬ */
        .detail-link {
            text-decoration: none;
            font-weight: 600;
            color: #0d6efd;
            transition: 0.2s;
        }

        .detail-link:hover {
            text-decoration: underline;
        }

    </style>

</head>

<body>

<div th:replace="layout/header :: header"></div>

<div class="container py-5 order-wrapper">

    <h3 class="fw-bold mb-4">ğŸ“¦ ì£¼ë¬¸ ë‚´ì—­</h3>

    <!-- ì£¼ë¬¸ ë°˜ë³µ -->
    <div th:each="order : ${orders}" class="card order-card mb-4 p-4">

        <div class="row align-items-center">

            <!-- ì£¼ë¬¸ ê¸°ë³¸ ì •ë³´ -->
            <div class="col-md-4">
                <p class="mb-1 text-muted small">
                    ì£¼ë¬¸ë²ˆí˜¸
                </p>

                <h5 class="fw-bold mb-2"
                    th:text="${order.id}">
                </h5>

                <p class="mb-1 text-muted small">
                    ì£¼ë¬¸ì¼
                </p>

                <span class="text-dark"
                      th:text="${#temporals.format(order.createdAt,'yyyy-MM-dd HH:mm')}">
                </span>

            </div>

            <!-- ê¸ˆì•¡ -->
            <div class="col-md-3 text-md-center mt-3 mt-md-0">

                <p class="text-muted small mb-1">ê²°ì œê¸ˆì•¡</p>

                <h5 class="fw-bold text-danger"
                    th:text="${T(java.lang.String).format('%,dì›', order.totalPrice)}">
                </h5>

            </div>

            <!-- ìƒíƒœ -->
            <div class="col-md-2 text-md-center mt-3 mt-md-0">

                <p class="text-muted small mb-1">ìƒíƒœ</p>

                <span th:class="'status-badge status-' + ${order.status}"
                      th:text="${order.status}">
                </span>
                
                <div th:if="${order.status == 'SHIPPED'}"
			         class="mt-2 small text-start">
			
			        ğŸšš <span th:text="${order.courier}"></span><br>
			        ğŸ“¦ <span th:text="${order.trackingNumber}"></span>
			
			    </div>

            </div>
            

            <!-- ë²„íŠ¼ -->
            <div class="col-md-3 text-md-end mt-3 mt-md-0">

                <a th:href="@{/order/orders/{id}(id=${order.id})}"
                   class="btn btn-outline-primary rounded-pill px-4">
                    ìƒì„¸ë³´ê¸°
                </a>

            </div>

        </div>

    </div>


    <!-- ì£¼ë¬¸ ì—†ì„ ë•Œ -->
    <div th:if="${#lists.isEmpty(orders)}"
         class="text-center py-5">

        <h5 class="text-muted">
            ğŸ›’ ì£¼ë¬¸ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤
        </h5>

        <a href="/product/list"
           class="btn btn-primary mt-3 rounded-pill px-4">
            ìƒí’ˆ ë³´ëŸ¬ê°€ê¸°
        </a>

    </div>


	<!-- ================= í˜ì´ì§• ================= -->
	<div class="mt-5"
	     th:if="${pagination != null and pagination.totalPages > 1}">
	
	    <nav>
	        <ul class="pagination justify-content-center">
	
	            <!-- ì´ì „ -->
	            <li class="page-item"
	                th:classappend="${pagination.first} ? 'disabled'">
	
	                <a class="page-link"
	                   th:href="@{/order/orders(page=${pagination.page - 1})}">
	                    â€¹
	                </a>
	            </li>
	
	            <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
	            <li class="page-item"
	                th:each="i : ${#numbers.sequence(1, pagination.totalPages)}"
	                th:classappend="${i == pagination.page} ? 'active'">
	
	                <a class="page-link"
	                   th:href="@{/order/orders(page=${i})}"
	                   th:text="${i}">
	                </a>
	
	            </li>
	
	            <!-- ë‹¤ìŒ -->
	            <li class="page-item"
	                th:classappend="${pagination.last} ? 'disabled'">
	
	                <a class="page-link"
	                   th:href="@{/order/orders(page=${pagination.page + 1})}">
	                    â€º
	                </a>
	
	            </li>
	
	        </ul>
	    </nav>
	
	</div>

</div>

<style>
.pagination {
    display: flex !important;
    flex-direction: row !important;
}
</style>

<div th:replace="layout/footer :: footer"></div>

</body>
</html>