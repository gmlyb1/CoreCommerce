<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/head :: head"></head>

<body class="d-flex flex-column min-vh-100 bg-light">

<div th:replace="layout/header :: header"></div>

<div class="container py-5 flex-grow-1" style="max-width:1100px;">

    <!-- ğŸ”· ìƒë‹¨ ì œëª© -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">ğŸ“¢ ê³µì§€ì‚¬í•­</h2>

        <a href="/notice/admin/write"
           class="btn btn-dark px-4 rounded-3">
            + ê³µì§€ ì‘ì„±
        </a>
    </div>


    <!-- ===================================================== -->
    <!-- ğŸ”¥ 1ï¸âƒ£ ì¤‘ìš” ê³µì§€ ì „ìš© ì˜ì—­ (ì™„ì „ ë¶„ë¦¬) -->
    <!-- ===================================================== -->
    <div th:if="${notices != null}" class="mb-4">

        <div th:each="notice : ${notices}"
             th:if="${notice.isPinned == true}"
             class="important-notice p-4 mb-3 rounded-4 shadow-sm"
             style="cursor:pointer;"
             th:onclick="|location.href='@{/notice/{id}(id=${notice.id})}'|">

            <div class="d-flex justify-content-between align-items-center">

                <div>
                    <span class="badge bg-danger me-3 px-3 py-2">
                        ğŸ“¢ ì¤‘ìš” ê³µì§€
                    </span>

                    <span class="fs-4 fw-bold text-danger"
                          th:text="${notice.title}">
                    </span>
                </div>

                <small class="text-muted"
                       th:text="${#temporals.format(notice.createdAt,'yyyy-MM-dd')}">
                </small>

            </div>

        </div>
    </div>


    <!-- ===================================================== -->
    <!-- ğŸ”· 2ï¸âƒ£ ì¼ë°˜ ê³µì§€ ì˜ì—­ -->
    <!-- ===================================================== -->
    <div class="card shadow-sm rounded-4 border-0">
        <div class="card-body p-0">

            <table class="table align-middle mb-0">
                <thead class="bg-dark text-white">
                <tr>
                    <th style="width:100px;" class="ps-4 text-center">ë²ˆí˜¸</th>
                    <th>ì œëª©</th>
                    <th style="width:180px;" class="text-center">ì‘ì„±ì¼</th>
                </tr>
                </thead>

                <tbody>

                <!-- ğŸ“­ ë°ì´í„° ì—†ì„ ë•Œ -->
                <tr th:if="${notices == null or #lists.isEmpty(notices)}">
                    <td colspan="3" class="text-center py-5 text-muted fs-5">
                        ğŸ“­ ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.
                    </td>
                </tr>

                <!-- ğŸ”¹ ì¼ë°˜ ê³µì§€ (ì¤‘ìš” ì œì™¸) -->
                <tr th:each="notice : ${notices}"
                    th:if="${notice.isPinned != true}"
                    class="normal-row"
                    style="cursor:pointer;"
                    th:onclick="|location.href='@{/notice/{id}(id=${notice.id})}'|">

                    <td class="ps-4 fw-semibold text-center"
                        th:text="${notice.id}">
                    </td>

                    <td class="fs-6">

                        <!-- NEW -->
                        <span th:if="${notice.createdAt != null 
                                      and notice.createdAt.isAfter(T(java.time.LocalDateTime).now().minusDays(3))}"
                              class="badge bg-warning text-dark me-2 px-2 py-1">
                            NEW
                        </span>

                        <span th:text="${notice.title}"></span>

                    </td>

                    <td class="text-muted text-center"
                        th:text="${#temporals.format(notice.createdAt,'yyyy-MM-dd')}">
                    </td>

                </tr>

                </tbody>
            </table>

            <!-- ===================================================== -->
            <!-- ğŸ”¥ 3ï¸âƒ£ í˜ì´ì§• -->
            <!-- ===================================================== -->
            <div class="mt-4 pb-4"
                 th:if="${pagination != null and pagination.totalPages > 1}">

                <ul class="pagination justify-content-center">

                    <!-- ì´ì „ -->
                    <li class="page-item"
                        th:classappend="${pagination.first} ? 'disabled'">

                        <a class="page-link"
                           th:href="@{/notice(page=${pagination.page - 1})}">
                            â€¹
                        </a>
                    </li>

                    <!-- ë²ˆí˜¸ -->
                    <li class="page-item"
                        th:each="i : ${#numbers.sequence(1, pagination.totalPages)}"
                        th:classappend="${i == pagination.page} ? 'active'">

                        <a class="page-link"
                           th:href="@{/notice(page=${i})}"
                           th:text="${i}">
                        </a>
                    </li>

                    <!-- ë‹¤ìŒ -->
                    <li class="page-item"
                        th:classappend="${pagination.last} ? 'disabled'">

                        <a class="page-link"
                           th:href="@{/notice(page=${pagination.page + 1})}">
                            â€º
                        </a>
                    </li>

                </ul>
            </div>

        </div>
    </div>

</div>


<!-- ===================================================== -->
<!-- ğŸ¨ ìŠ¤íƒ€ì¼ -->
<!-- ===================================================== -->
<style>

/* ğŸ”¥ ì¤‘ìš” ê³µì§€ ì¹´ë“œ */
.important-notice {
    background: linear-gradient(135deg, #fff3cd, #ffe0b2);
    border-left: 10px solid #ff5722;
    transition: all 0.2s ease-in-out;
}

.important-notice:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

/* ì¼ë°˜ ê³µì§€ hover */
.normal-row:hover {
    background-color: #f8f9fa;
    transition: 0.15s ease-in-out;
}

/* í˜ì´ì§• */
.pagination {
    display: flex !important;
    justify-content: center !important;
    flex-direction: row !important;
}

.pagination .page-item {
    display: inline-block !important;
}

.pagination .page-link {
    display: inline-block !important;
}

</style>

<div th:replace="layout/footer :: footer"></div>

</body>
</html>