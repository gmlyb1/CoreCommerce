<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="layout/head :: head"></head>
<body class="bg-light">

<div th:replace="layout/header :: header"></div>

<div class="container py-5" style="max-width:1200px;">

    <h3 class="fw-bold mb-4">üë• ÌöåÏõê Í¥ÄÎ¶¨</h3>

    <!-- ===================================================== -->
    <!-- üîé Í≤ÄÏÉâ -->
    <!-- ===================================================== -->
    <form method="get"
          class="mb-3 d-flex gap-2 align-items-center">

        <input type="text"
               name="email"
               class="form-control w-25"
               placeholder="Ïù¥Î©îÏùº"
               th:value="${search?.email}">

        <input type="text"
               name="name"
               class="form-control w-25"
               placeholder="Ïù¥Î¶Ñ"
               th:value="${search?.name}">

        <select name="role"
                class="form-select w-auto">

            <option value="" selected>Ï†ÑÏ≤¥Í∂åÌïú</option>

            <option value="USER"
                    th:selected="${search?.role == 'USER'}">
                USER
            </option>

            <option value="MANAGER"
                    th:selected="${search?.role == 'MANAGER'}">
                MANAGER
            </option>

            <option value="PRODUCTER"
                    th:selected="${search?.role == 'PRODUCTER'}">
                PRODUCTER
            </option>

        </select>

        <button class="btn btn-dark">
            Í≤ÄÏÉâ
        </button>

    </form>

    <!-- ===================================================== -->
    <!-- üîµ ÌÖåÏù¥Î∏î -->
    <!-- ===================================================== -->
    <div class="card shadow border-0 rounded-4">
        <div class="card-body">

            <table class="table table-hover text-center align-middle">

                <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Email</th>
                    <th>Ïù¥Î¶Ñ</th>
                    <th>ÌòÑÏû¨ Í∂åÌïú</th>
                    <th>Î≥ÄÍ≤Ω</th>
                    <th>ÏÇ≠Ï†ú</th>
                    <th>Ïû†Í∏à ÎßåÎ£åÏùº</th>
                </tr>
                </thead>

                <tbody>

                <tr th:if="${#lists.isEmpty(members)}">
                    <td colspan="6" class="py-4">
                        ÌöåÏõê ÏóÜÏùå
                    </td>
                </tr>

                <tr th:each="member : ${members}">

                    <td th:text="${member.id}"></td>
                    <td th:text="${member.email}"></td>
                    <td th:text="${member.name}"></td>

                    <td>
                        <span class="badge bg-primary"
                              th:text="${member.role}">
                        </span>
                    </td>

                    <!-- üî• Í∂åÌïú Î≥ÄÍ≤Ω -->
                    <td>

                        <form th:action="@{/admin/member/role}"
                              method="post"
                              class="d-flex gap-2 justify-content-center">

                            <input type="hidden"
                                   name="memberId"
                                   th:value="${member.id}">

                            <input type="hidden"
                                   name="email"
                                   th:value="${search?.email}">

                            <input type="hidden"
                                   name="name"
                                   th:value="${search?.name}">

                            <input type="hidden"
                                   name="role"
                                   th:value="${search?.role}">

                            <select name="role"
                                    class="form-select w-auto">

                                <option value="USER"
                                        th:selected="${member.role == 'USER'}">
                                    USER
                                </option>

                                <option value="MANAGER"
                                        th:selected="${member.role == 'MANAGER'}">
                                    MANAGER
                                </option>

                                <option value="PRODUCTER"
                                        th:selected="${member.role == 'PRODUCTER'}">
                                    PRODUCTER
                                </option>

                            </select>

                            <button class="btn btn-success btn-sm">
                                Ï†ÄÏû•
                            </button>

                        </form>

                    </td>

                    <!-- üî• ÏÇ≠Ï†ú -->
                    <td>
                        <form th:action="@{/admin/member/lock}" method="post" class="d-flex gap-2">
					
					    <input type="hidden"
					           name="memberId"
					           th:value="${member.id}">
					
					    <select name="days"
					            class="form-select form-select-sm">
					
					        <option value="1">1Ïùº Ïû†Í∏à</option>
					        <option value="7">7Ïùº Ïû†Í∏à</option>
					        <option value="30">30Ïùº Ïû†Í∏à</option>
					        <option value="0">ÏòÅÍµ¨ Ïû†Í∏à</option>
					
					    </select>
					
					    <button class="btn btn-warning btn-sm">
					        Í≥ÑÏ†ï Ïû†Í∏à
					    </button>
					
					</form>
                    </td>
                    
                    <td>
					    <span th:text="${member.lockedUntil != null ? 
					                    #temporals.format(member.lockedUntil,'yyyy-MM-dd HH:mm') 
					                    : '-'}">
					    </span>
					</td>

                </tr>

                </tbody>
            </table>

        </div>
    </div>

</div>

<div th:replace="layout/footer :: footer"></div>

</body>
</html>