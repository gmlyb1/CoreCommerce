<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/head :: head"></head>
<body class="d-flex flex-column min-vh-100">

<div th:replace="layout/header :: header"></div>

<div class="container flex-grow-1 mt-5 mb-5 text-center">

    <h3>ğŸ’³ ê²°ì œ í˜ì´ì§€</h3>

    <div class="mt-4">
        <p>ì£¼ë¬¸ë²ˆí˜¸ : <b th:text="${order.id}"></b></p>
        <p>ê²°ì œê¸ˆì•¡ :
            <b th:text="${T(java.lang.String)
                 .format('%,dì›', order.totalPrice)}"></b>
        </p>
    </div>

    <button class="btn btn-primary mt-3"
            onclick="requestPayment([[${order.id}]], [[${order.totalPrice}]])">
        ê²°ì œ ì§„í–‰
    </button>

</div>

<div th:replace="layout/footer :: footer"></div>

<script src="https://js.tosspayments.com/v1"></script>

<script th:inline="javascript">

    const tossPayments = TossPayments("í´ë¼ì´ì–¸íŠ¸í‚¤");
    const baseUrl = window.location.origin;
    
    function requestPayment(orderId, amount) {

        tossPayments.requestPayment("ì¹´ë“œ", {
            amount: amount,
            orderId: orderId.toString(),
            orderName: "CoreCommerce ì£¼ë¬¸",
            successUrl: baseUrl + "/payment/success",
            failUrl: baseUrl + "/payment/fail"
        });
    }

</script>

</body>
</html>